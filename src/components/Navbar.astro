---
interface Props {
	currentPath: string;
}

const { currentPath } = Astro.props;

// Normalize path by removing trailing slash (except for root)
const normalizedPath =
	currentPath === "/" ? "/" : currentPath.replace(/\/$/, "");

const navLinks = [
	{ href: "/", label: "alexgaudon.dev", isBrand: true },
	{ href: "/projects", label: "Projects" },
];

// Helper function to check if a link is active
const isActive = (href: string) => {
	if (href === "/") {
		return normalizedPath === "/";
	}
	return normalizedPath === href || normalizedPath.startsWith(`${href}/`);
};
---

<nav class="p-4">
  <div class="w-full md:w-1/2 mx-auto flex justify-between items-center">
    {navLinks
      .filter((link) => link.isBrand)
      .map((link) => (
        <a
          href={link.href}
          class="text-lg font-bold relative transition-colors duration-300 flex items-center gap-2"
        >
          <span class={!isActive(link.href) ? "hover:underline relative" : "relative"}>
            {link.label}
            {!isActive(link.href) && (
              <span
                class="absolute left-0 -bottom-1 w-full h-0.5 bg-current transition-all duration-300 opacity-0 scale-x-0 group-hover:opacity-100 group-hover:scale-x-100"
                style={{
                  transformOrigin: "left",
                  transitionProperty: "opacity, transform",
                  transform: "scaleX(0)",
                }}
                aria-hidden="true"
              />
            )}
          </span>
        </a>
      ))}
    <div class="flex items-center space-x-4">
      <ul class="flex space-x-4">
        {navLinks
          .filter((link) => !link.isBrand)
          .map((link) => (
            <li>
              <a
                href={link.href}
                class={`relative transition-colors duration-300 ${isActive(link.href) ? 'font-bold' : 'text-stone-400'}`}
              >
                <span class={!isActive(link.href) ? "hover:underline relative" : "relative"}>
                  {link.label}
                  {!isActive(link.href) && (
                    <span
                      class="absolute left-0 -bottom-1 w-full h-0.5 bg-current transition-all duration-300 opacity-0 scale-x-0 group-hover:opacity-100 group-hover:scale-x-100"
                      style={{
                        transformOrigin: "left",
                        transitionProperty: "opacity, transform",
                        transform: "scaleX(0)",
                      }}
                      aria-hidden="true"
                    />
                  )}
                </span>
              </a>
            </li>
          ))}
      </ul>
    </div>
  </div>
</nav>
